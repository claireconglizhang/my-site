<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Relationship Between Two Categorical Variables</title>
    <meta charset="utf-8" />
    <meta name="author" content="Congli Zhang" />
    <meta name="author" content="Doctoral Candidate" />
    <meta name="author" content="College of Education, University of Oregon" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <script type="application/json" id="xaringanExtra-editable-docid">{"id":"x2db3708ca61460ebd43d1a874027a05","expires":1}</script>
    <script src="libs/himalaya/himalaya.js"></script>
    <script src="libs/js-cookie/js.cookie.js"></script>
    <link href="libs/editable/editable.css" rel="stylesheet" />
    <script src="libs/editable/editable.js"></script>
    <script src="libs/kePrint/kePrint.js"></script>
    <link href="libs/lightable/lightable.css" rel="stylesheet" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="my.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Relationship Between Two Categorical Variables
]
.author[
### Congli Zhang
]
.author[
### Doctoral Candidate
]
.author[
### College of Education, University of Oregon
]

---





### Learning Objectives

 - Describe relationships between variables that are categorical with ordinal or nominal scales

   - Two-way contingency tables
   - Grouped bar charts
 
 - Test the relationship between two categorical variables using **Chi-square Test of Independence**
 
 - Chi-square test assumptions
 
 - Make statistical inference from a Chi-square statistic
 
(*This mini course is designed based on the statistics course materials from Dr. David Liebowitz and Dr. Cengiz Zopluoglu at the University of Oregon*)

---
### Prerequisites

I assume you have learned these statistical concepts:

 - Levels of measurement
 
 - Central Limit Theorem 
 
 - Hypothesis testing procedure
 
   - Check assumptions and write the null hypothesis
   - Calculate the test statistic
   - Determine the p-value
   - Make a decision whether to reject the null 
   - Make statistical inference

---
### Motivating Research Question

.highlighter02[Whether there is a significant relationship between drinking and health?]

Suppose the toy data below is drawn from my population of interest, say, the adults in the state of Oregon. 



```
## # A tibble: 6 Ã— 2
##   Drink Health   
##   &lt;fct&gt; &lt;fct&gt;    
## 1 No    Good     
## 2 Yes   Excellent
## 3 Yes   Good     
## 4 No    Excellent
## 5 Yes   Excellent
## 6 Yes   Excellent
```

Putting into words:
 - Our data contains ... observations and ... variables,"Drink" and "Health". Both variables are .... (categorical or continuous).
 
---
### Summarize each variable

Recall when summarize a categorical variable, we usually use counts and percentages

&lt;table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:left;"&gt;    &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; N &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; % &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Drink &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Yes &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 79.6 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 60 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20.4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Health &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Poor &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4.8 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Fair &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 35 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.9 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Good &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 115 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39.1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Excellent &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 130 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 44.2 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

Putting summary statistics into words: 

 - There are .... observations in the data. The variable "Drink" has ... categories, the category of "Yes" has ... observations, which is ... percent of the sample, the category of "No" has .... 
 
 - Similarly for the variable "Health", ....

---
### Describe categorical relationship: two-way contingency table


```
##      Health
## Drink Poor Fair Good Excellent Sum
##   Yes    6   23   98       107 234
##   No     8   12   17        23  60
##   Sum   14   35  115       130 294
```

Putting the table into words:
 - In our sample of Oregon adults who do not drink, ......; in those who drink, ......


---
### Describe categorical relationship: grouped charts

![](teaching_files/figure-html/unnamed-chunk-4-1.png)&lt;!-- --&gt;

Putting the plot into words:
 - Within each health condition, there are more people who... than people who ..., except for people who have a poor health condition, there are more more people who... than people who ...
 
---
### Whether there is a significant relationship between drinking and health?

Null hypothesis

 - `\(H_0\)`: Drinking is not associated with health condition, in the population of Oregon adults.
 - `\(H_a\)`: Drinking is associated with health condition, in the population of Oregon adults.
 
---
### What does our `\(H_0\)` mean in the contingency table?
&lt;img src="./0_pics/1.png"&gt;


---
### The Chi-square `\(\chi^2\)` statistic
&lt;img src="./0_pics/2.png"&gt;

---
### Evaluate `\(H_0\)` (compare p-value and alpha threashold)

Intuition:

 - Since `\(\chi^2\)` measures the net discrepancy between our data observed and expected under `\(H_0\)`, a `\(\chi^2\)` of zero or close suggests no relationship between drink and health. 
 - But how to statistically define what is big, what is close to zero?

statistical approach:

 - One way is to take our `\(\chi^2\)` and `\(df\)` to plug in [some online calculator](http://onlinestatbook.com/2/calculators/chi_square_prob.html) to get the p-value

---
### Evaluate `\(H_0\)` (cont'd)

The other way is to formally conduct chi-square testing in with a statistical software, R, in today's case


```
## 
## 	Pearson's Chi-squared test
## 
## data:  df$Drink and df$Health
## X-squared = 18.611, df = 3, p-value = 0.0003289
```

Putting the Chi-square testing results into word:

"A Chi-square test was conducted to test whether or not there is a significant relationship between drinking and health condition in the population of Oregon adults. The findings indicated that there was a significant relationship between drinking and health condition, `\(\chi^2\)` = 18.611, p &lt; .001." 

---
### Chi-square test assumptions

 - Observations are independent.
 
 - The same individual cannot appear or be counted in multiple cells
 
 - For 2X2 table, all expected frequencies are above 5

 - For a larger table, all expected frequencies are above 1 and no more than 20% of all cells have expected frequencies less than 5
 
 - If these assumptions do not hold, then the distribution does not follow a [chi-square distribution](https://www.jmp.com/en_ca/statistics-knowledge-portal/chi-square-test/chi-square-distribution.html) and the p-values are not valid


---
### Reminder of basic steps conducting classical statistical inference

 - State a research question, including a null hypothesis which states there exists no relationship between our variables of interest

 - Display and describe the observed data

 - Summarize (using a statistic such as `\(\chi^2\)` today) the observed data in relationship to an expected value under the null hypothesis

 - Set a threshold at which we will no longer believe that the discrepancy between the observed and expected relationship is due to sampling idiosyncrasy

 - Estimate the p-value

 - Reject or fail to reject the null hypothesis

 - Interpret findings drawing on test statistics as well as plots and summary statistics 
 
---
### Self-evaluation your learning today

 - Describe relationships between variables that are categorical with ordinal or nominal scales

   - Two-way contingency tables
   - Grouped bar charts
 
 - Test the relationship between two categorical variables using **Chi-square Test of Independence**
 
 - Chi-square test assumptions
 
 - Make statistical inference from a `\(\chi^2\)` statistic

---
class: center, middle
background-image: url(back01.png)
background-size: cover

# Q &amp; A





    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
(function(time) {
  var d2 = function(number) {
    return ('0' + number).slice(-2); // left-pad 0 to minutes/seconds
  },

  time_format = function(total) {
    var secs = Math.abs(total) / 1000;
    var h = Math.floor(secs / 3600);
    var m = Math.floor(secs % 3600 / 60);
    var s = Math.round(secs % 60);
    var res = d2(m) + ':' + d2(s);
    if (h > 0) res = h + ':' + res;
    return res;  // [hh:]mm:ss
  },

  slide_number_div = function(i) {
    return document.getElementsByClassName('remark-slide-number').item(i);
  },

  current_page_number = function(i) {
    return slide_number_div(i).firstChild.textContent;  // text "i / N"
  };

  var timer = document.createElement('span'); timer.id = 'slide-time-left';
  var time_left = time, k = slideshow.getCurrentSlideIndex(),
      last_page_number = current_page_number(k);

  setInterval(function() {
    time_left = time_left - 1000;
    timer.innerHTML = ' ' + time_format(time_left);
    if (time_left < 0) timer.style.color = 'red';
  }, 1000);

  slide_number_div(k).appendChild(timer);

  slideshow.on('showSlide', function(slide) {
    var i = slide.getSlideIndex(), n = current_page_number(i);
    // reset timer when a new slide is shown and the page number is changed
    if (last_page_number !== n) {
      time_left = time; last_page_number = n;
      timer.innerHTML = ' ' + time_format(time); timer.style.color = null;
    }
    slide_number_div(i).appendChild(timer);
  });
})(50000);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
